<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Simple Online Store</title>
<style>
body { font-family: Arial; margin:0; padding:20px; background:#f4f4f4; }
h2 { margin-top:40px; }
.store { display: flex; gap:20px; flex-wrap:wrap; }
.product {
    background:#fff; padding:15px; width:200px; border-radius:10px;
    box-shadow:0 2px 5px rgba(0,0,0,0.15); text-align:center;
}
.product img { width:100%; border-radius:8px; }
.cart-box {
    position:fixed; top:20px; right:20px; width:300px;
    background:#fff; padding:15px; border-radius:10px;
    box-shadow:0 2px 10px rgba(0,0,0,0.2);
}
.cart-item { display:flex; justify-content:space-between; margin-bottom:8px; }
button { padding:8px 12px; border:none; background:#333; color:#fff; cursor:pointer; border-radius:5px; }
button:hover { background:#555; }
#checkoutModal {
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.5); display:none; justify-content:center; align-items:center;
}
.modal-content {
    background:#fff; padding:20px; width:350px; border-radius:10px;
}
input, textarea { width:100%; padding:8px; margin-bottom:10px; }
</style>
</head>
<body>

<h1>My Online Store</h1>

<!-- CATEGORY FILTER -->
<select id="categoryFilter" onchange="filterCategory()">
  <option value="all">All</option>
  <option value="drinks">Drinks</option>
  <option value="snacks">Snacks</option>
</select>

<div class="store" id="productList">
  <!-- PRODUCT 1 -->
  <div class="product" data-category="drinks">
      <img src="https://via.placeholder.com/200x150&quot; />
      <h3>Cola</h3>
      <p>$30</p>
      <button onclick="addToCart('Cola', 30)">Add to Cart</button>
  </div>

  <!-- PRODUCT 2 -->
  <div class="product" data-category="snacks">
      <img src="https://via.placeholder.com/200x150&quot; />
      <h3>Chips</h3>
      <p>$25</p>
      <button onclick="addToCart('Chips', 25)">Add to Cart</button>
  </div>

  <!-- PRODUCT 3 -->
  <div class="product" data-category="drinks">
      <img src="https://via.placeholder.com/200x150&quot; />
      <h3>Green Tea</h3>
      <p>$35</p>
      <button onclick="addToCart('Green Tea', 35)">Add to Cart</button>
  </div>
</div>

<!-- CART -->
<div class="cart-box">
  <h3>Your Cart</h3>
  <div id="cartItems"></div>
  <hr>
  <p><strong>Total: $<span id="cartTotal">0</span></strong></p>
  <button onclick="openCheckout()">Checkout</button>
</div>

<!-- CHECKOUT MODAL -->
<div id="checkoutModal">
  <div class="modal-content">
    <h3>Checkout</h3>
    <input id="name" placeholder="Full Name">
    <input id="phone" placeholder="Phone">
    <textarea id="address" placeholder="Delivery Address"></textarea>

    <button onclick="sendEmail()">Place Order (COD)</button>
    <button onclick="closeCheckout()" style="background:red;margin-top:5px;">Cancel</button>
  </div>
</div>

<script>
let cart = JSON.parse(localStorage.getItem("cart") || "[]");
updateCart();

// FILTER
function filterCategory() {
    let selected = document.getElementById("categoryFilter").value;
    document.querySelectorAll(".product").forEach(p => {
        if (selected === "all" || p.dataset.category === selected)
            p.style.display = "block";
        else
            p.style.display = "none";
    });
}

// ADD TO CART
function addToCart(name, price) {
    let item = cart.find(i => i.name === name);
    if (item) item.qty++;
    else cart.push({ name, price, qty:1 });

    localStorage.setItem("cart", JSON.stringify(cart));
    updateCart();
}

function removeFromCart(name) {
    cart = cart.filter(i => i.name !== name);
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCart();
}

// UPDATE CART VIEW
function updateCart() {
    let box = document.getElementById("cartItems");
    box.innerHTML = "";
    let total = 0;

    cart.forEach(item => {
        total += item.price * item.qty;
        box.innerHTML += `
            <div class="cart-item">
              ${item.name} x${item.qty}
              <button onclick="removeFromCart('${item.name}')">X</button>
            </div>`;
    });

    document.getElementById("cartTotal").innerText = total;
}

// CHECKOUT
function openCheckout() {
    if (cart.length === 0) { alert("Cart is empty!"); return; }
    document.getElementById("checkoutModal").style.display = "flex";
}

function closeCheckout() {
    document.getElementById("checkoutModal").style.display = "none";
}

// SEND EMAIL
function sendEmail() {
    const name = document.getElementById("name").value;
    const phone = document.getElementById("phone").value;
    const address = document.getElementById("address").value;

    if (!name || !phone || !address) {
        alert("Fill all fields!");
        return;
    }

    let body = `New COD Order\n\nCustomer Information:\n`;
    body += `Name: ${name}\nPhone: ${phone}\nAddress: ${address}\n\nItems:\n`;

    cart.forEach(i => {
        body += `• ${i.name} x${i.qty} — $${i.price * i.qty}\n`;
    });

    let total = cart.reduce((s,i)=>s+i.price*i.qty,0);
    body += `\nTotal: $${total}\n`;

    const mailtoLink =
      `clive.lin.dino@gmail.com?subject=New COD Order&body=${encodeURIComponent(body)}`;

    window.open(mailtoLink, "_blank");

    // Clear cart
    cart = [];
    localStorage.removeItem("cart");
    updateCart();
    closeCheckout();
}
</script>

</body>
</html>
